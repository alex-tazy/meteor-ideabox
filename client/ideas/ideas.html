<template name="index">
	<head>
		<title>IdeaBox</title>
	</head>
	<body>
		<div class="container">
			<div class="col-md-6 col-md-offset-3">
				<h1>IdeaBox</h1>
				{{#if currentUser}}
					<p>Bonjour <b>{{currentUser.username}}</b> <button class="btn btn-warning logout">Deconnexion</button></p>
				{{else}}
					<p>Pas encore inscrit !</p>
				{{/if}}
			</div>
			{{#if currentUser}}
				{{> result}}
			{{else}}
				<p>Erreur de connexion <a href="/login">Retourner Ã  la page de connexion</a></p>
			{{/if}}
		</div>
	</body>
</template>

<template name="form">
	<form class="form-inline">
		<div class="form-group">
			<label for="titre">Titre</label>
			<input class="form-control" type="text" id="titre" placeholder="titre" required>
		</div>
		<div class="form-group">
			<label for="idee">Idee</label>
			<input class="form-control" type="text" id="idee" placeholder="idee..." required>
		</div>
		<button type="submit" class="btn btn-default">Submit</button>
	</form>
</template>

<template name="result">
<div class="col-md-6 col-md-offset-3">
	{{> form}}
	<table class="table">
		<thead>
			<tr>
				<th>#</th>
				<th>Titre</th>
				<th>Idee</th>
				<th>Date</th>
				<th>Author</th>
				<th>Votes</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
		{{#each getResults}}
			<tr>
				<td></td>
				<td><span class="data"><span class="data-value">{{ titre }}</span><input type="text" class="hidden form-control edit-input new-title" value="{{titre}}"></span></td>
				<td><span class="data"><span class="data-value">{{ idee }}</span><input type="text" class="hidden form-control edit-input new-idee" value="{{idee}}"></span></td>
				<td>{{ date }}</td>
				<td>{{ author }}</td>
				<td>{{ votes }}</td>
				<td><button class="btn btn-primary">Voter</button><button class="btn btn-danger">Supprimer</button></td>
			</tr>
		{{/each}}
		</tbody>
	</table>
</div>
</template>